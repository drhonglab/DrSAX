<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>DSX : for Dr.SAXOPHONE
    </title>
    <script src="cont/js/platform.js"></script>
<link rel="import" href="cont/webcomponents/polymer.html">
<link rel="import" href="cont/webcomponents/controls.html">

<h1> DSX : Dr.SaXophone effects on the web<h1>

<button id = 'dry'>input off</button>

<button id = 'st'>START</button>

<button id = 'sop'>STOP</button>

     <input id ='knob1' type="range" min="0" max="0.9" step="0.1" value="0">




      
        
    <input id="high"  type="range" min="-20" max="20" step="1" value="0"><br>

 <input id="midhigh" type="range" min="-20" max="20" step="1" value="0"><br>
 <input id="mid" type="range" min="-20" max="20" step="1" value="0"><br>
 <input id="midlow"  type="range" min="-20" max="20" step="1" value="0"><br>
 <input id="low"  type="range" min="-20" max="20" step="1" value="0"><br>

         <button onclick="micInputon()">input on</button>

 <button onclick="micInputoff()">input off</button> 




  <input id="frq"  type="range" min="0" max="2000" step="1" value="0"><br>


 <input id="inputS" type="file" accept="audio/*">
   <button onclick="playSound()" >Play</button>
          <button onclick="stopSound()" >Stop</button>
        
   </head>    





  <body>




<script src="newDSX.1.6.9.5.js"></script>

    <script>
alert(DSX.get(5,6));
var DSX = new DSX;
var Delay = new DSX.Delay({ delayTime : 200, feedback: 0.45, });
var stereoPan = new DSX.stereoPan({ pan: -1,});
var saxComp = new DSX.saxComp({ threshold: -70,  ratio: 12, });
var gain = new DSX.Amp({ gain: 0.1});
var aux = new DSX.Aux({ gain: 0.7});
var saxGain = new DSX.Aux({ gain: 0.7}); //mic
var osc = new  DSX.Osc("sine",500);
var newEQ = new  DSX.EQ({hiGain:-10, mhiGain:-10, miGain:-10, milowGain:-10, lowGain:-10});
var am = new  DSX.AM("sine",10,0.8,0.5); //am
var fm = new  DSX.FM(500,"sine",500,"sine",1800,0.5); //fm
var sub = new DSX.Subtract({frequency:1230, cutoff:1000, gain:0.5});
var abc =new DSX.BGsound();
var Reverb =new DSX.Reverb(0.6);
var saxInput =new DSX.Mic();
var st =new DSX.valueChange("frq",osc.frequency);//  aux.gain,gain.gain ables
var qqq =new DSX.valueToggle('st'); //// toggle bang/////

//// toggle bang/////
qqq.set(tt);
function tt(){
osc.start();

}


//// change/////
st.set(stt);// controll various data
function stt(){
if(osc.frequency.value > 600) {
  alert("Df");
} 

}






function playSound() {
  abc.connect(gain);
 
  
}
function stopSound() {
  
    abc.stop(); // Stop source 1 immediately
  
}
function micInputon() {
saxInput.connect(saxGain);
Reverb.startfrom(saxGain);
   }
   function micInputoff() {
saxInput.disconnect(saxGain);
   }
osc.connect(gain);
Reverb.connect(gain);
am.connect(saxComp);
saxComp.connect(newEQ);
newEQ.connect(Delay);
Delay.connect(gain);
gain.connect(aux);
aux.connect(DAC);





    var dry = document.getElementById("dry");
        dry.addEventListener("click", function(e) {
    saxComp.threshold = -30;
});
   var knob1 = document.getElementById('knob1');
       knob1.addEventListener("change",function (data) {
        var str= 0;
       str= data.target.value 
       Delay.feedback  = str; 
Reverb.reverb_Gain.gain.value  = str;
     });
   // var st = document.getElementById("st");
       // st.addEventListener("click", function() {
//osc.start();
//});
            var sop = document.getElementById("sop");
        sop.addEventListener("click", function(e) {
 osc.stop();
});
///////////filter /////////////
         var dryq = document.getElementById("high");
        dryq.addEventListener("change", function(data) {
 newEQ.hiGain = data.target.value ;
});  var dryqtt = document.getElementById("midhigh");
        dryqtt.addEventListener("change", function(data) {
 newEQ.mhiGain = data.target.value ;
});
 var dryrt = document.getElementById("mid");
        dryrt.addEventListener("change", function(data) {
newEQ.miGain= data.target.value ;
}); var dryrhh = document.getElementById("midlow");
        dryrhh.addEventListener("change", function(data) {
 newEQ.milowGain= data.target.value ;
});
 var drywt = document.getElementById("frq");
        drywt.addEventListener("change", function(data) {
      
//osc.drOsc.frequency.value = data.target.value ;
});



///////////////////
    </script>

  
  </body>
</html>